<odoo>
    <template id="report_delivery_document_inherit" inherit_id="stock.report_delivery_document">
        <xpath expr="//div[contains(@class, 'page')]" position="replace">
            <!-- Conteneur principal avec flexbox pour aligner FMA et le client c√¥te √† c√¥te -->
            <div class="header_table" style="display: flex; justify-content: space-between; font-family: 'DejaVu Sans', sans-serif;">
                
                <!-- Bloc de la soci√©t√© FMA-F2M -->
                <div class="company_info" style="flex: 1;">
                    <strong t-field="o.company_id.name" /><br />
                    <img src="/custom_delivery/static/src/img/lieu.png" style="height: 16px; width: 16px;" alt="lieu" />
                    <span t-field="o.company_id.street" /><br />
                    <span t-field="o.company_id.zip" /> <span t-field="o.company_id.city" /><br />
                    <img src="/custom_delivery/static/src/img/appel-telephonique.png" style="height: 16px; width: 16px;" alt="appel-telephonique" /> T√©l: <span t-field="o.company_id.phone" /><br />
                    <img src="/custom_delivery/static/src/img/enveloppe.png" style="height: 16px; width: 16px;" alt="enveloppe" /> Email: <span t-field="o.company_id.email" />
                </div>
                
                <!-- Bloc des informations du client -->
                <div class="customer_info" style="flex: 1; text-align: right;">
                    <strong>Client :</strong><br />
                    <span t-field="o.partner_id.name" /><br />
                    <strong>Adresse :</strong><br />
                    <span t-field="o.partner_id.street" /><br />
                    <span t-field="o.partner_id.zip" /> <span t-field="o.partner_id.city" /><br />
                    <strong>T√©l√©phone :</strong> ‚òéÔ∏è <span t-field="o.partner_id.phone" /><br />
                    <strong>Email :</strong> <img src="/custom_delivery/static/src/img/enveloppe.png" style="height: 16px; width: 16px;" alt="enveloppe" /> <span t-field="o.partner_id.email" />
                </div>
            </div>

            <!-- Bloc des informations de livraison -->
            <div class="delivery_info" style="margin-top: 20px;">
                <strong>Adresse de livraison :</strong><br />
                <span t-field="o.partner_id.name" /><br />
                <span t-field="o.partner_id.street" /><br />
                <span t-field="o.partner_id.zip" /> <span t-field="o.partner_id.city" /><br />
                <strong>Contact :</strong> ‚òéÔ∏è <span t-field="o.partner_id.phone" /><br />
                <img src="/custom_delivery/static/src/img/enveloppe.png" style="height: 16px; width: 16px;" alt="enveloppe" /> <span t-field="o.partner_id.email" />
            </div>

            <!-- Bloc des informations de dossier -->
            <div style="margin-top: 20px;">
                <p><strong>Num√©ro de dossier FMA :</strong> <span t-field="o.origin" /></p>
                <p><strong>Livraison le : </strong>
                <span t-field="o.scheduled_date" t-options="{'widget': 'date'}" /></p>
                <p><strong class="bold_text">BON DE LIVRAISON</strong><br />
                N¬∞: 
                <t t-if="'OUT' in o.name">
                    <t t-esc="o.name.replace('OUT', 'BL')"/>
                </t>
                <t t-else="">
                    <t t-esc="o.name"/> 
                </t></p>
            </div>

            <!-- Bloc des informations personnalis√©es -->
            <div class="custom_info" style="display: flex; justify-content: space-between; margin-top: 20px;">
                <!-- Colonne de gauche --> 
                <div style="flex: 1; padding-right: 20px;">
                    <p><strong>Acc√®s : </strong><span t-field="o.sale_id.so_acces_bl" /></p>
                    <p><strong>Type de camion : </strong><span t-field="o.sale_id.so_type_camion_bl" /></p>
                </div>
                <!-- Colonne de droite -->
                <div style="flex: 1; padding-left: 20px; text-align: right;">
                    <p><strong>üïí Horaire d'ouverture : </strong><span t-field="o.sale_id.so_horaire_ouverture_bl" t-options='{"widget": "float_time"}'/></p>
                    <p><strong>üïï Horaire de fermeture : </strong><span t-field="o.sale_id.so_horaire_fermeture_bl" t-options='{"widget": "float_time"}'/></p>
                </div>
            </div>

            <!-- Table avec en-t√™te de colonne -->
            <table class="table table-sm" name="stock_move_table" style="margin-top: 20px;">
                <thead>
                    <tr>
                        <th>R√©f√©rence</th>
                        <th>Description</th>
                        <th>Largeur</th>
                        <th>Hauteur</th>
                        <th>Qte Command√©</th>
                        <th>Qte Livr√©</th>
                        <th>Reliquat</th>
                    </tr>
                </thead>
                <tbody>
                    <tr t-foreach="o.move_ids_without_package" t-as="line" t-if="line.product_id.default_code">
                        <td>
                            <span t-field="line.product_id.default_code" />
                        </td>
                        <td>
                            <span t-field="line.product_id.name" />
                        </td>
                        <td>
                            <span t-field="line.product_id.x_studio_largeur_mm" />
                        </td>
                        <td>
                            <span t-field="line.product_id.x_studio_hauteur_mm" />
                        </td>
                        <td>
                            <span t-field="line.sale_line_id.product_uom_qty" />
                        </td>
                        <td>
                            <span t-field="line.sale_line_id.qty_delivered" />
                        </td>
                        <td>
                            <span t-esc="line.sale_line_id.product_uom_qty - line.sale_line_id.qty_delivered" />
                        </td>    
                    </tr>
                </tbody>
            </table>

            <!-- Poids total -->
            <div class="total_weight_section" 
                 style="margin-top: 40px; padding: 10px; border: 2px solid black; border-radius: 5px; font-weight: bold; text-align: center;">
                ‚öñÔ∏è Poids total : <span t-esc="sum(line.product_id.weight * line.product_uom_qty for line in o.move_ids_without_package)"/> kg
            </div>
        </xpath>
    </template>
</odoo>
